"use strict";(self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[]).push([[535],{4238:function(t,a,e){var i=e(4311),s=e(1020),r=e(6294);const o=(0,r.Z)();a["Z"]=(0,s.Q_)("productStore",{state:()=>({products:[],isLoadSkeleton:!0}),actions:{loadImg(t){const a=[...t];let e=0;a.forEach((t=>{const i=new Image;i.src=t,i.addEventListener("load",(()=>{e+=1,e===a.length&&(this.isLoadSkeleton=!1)}))}))},getProducts(){const t="https://vue3-course-api.hexschool.io/api/qing-api/products/all";o.isLoading=!0,i.Z.get(t).then((t=>{const a=t.data.products.map((t=>[t.imageUrl]));this.loadImg([].concat(...a)),this.products=t.data.products,o.isLoading=!1}))}}})},8073:function(t,a,e){e.d(a,{Z:function(){return k}});var i=e(3396),s=e(7139),r=e(9242);const o={"aria-label":"Page navigation example"},c={class:"pagination justify-content-center"},l={class:"page-item"},n=(0,i._)("span",{"aria-hidden":"true"},"«",-1),d=[n],u=["onClick"],g={class:"page-item"},p=(0,i._)("span",{"aria-hidden":"true"},"»",-1),_=[p];function h(t,a,e,n,p,h){return(0,i.wg)(),(0,i.iD)("nav",o,[(0,i._)("ul",c,[(0,i._)("li",l,[(0,i._)("a",{class:(0,s.C_)(["page-style",{disabled:!1===e.pages.has_pre}]),href:"#","aria-label":"Previous",onClick:a[0]||(a[0]=(0,r.iM)((t=>h.updatePage(e.pages.current_page-1)),["prevent"]))},d,2)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.pages.total_pages,(t=>((0,i.wg)(),(0,i.iD)("li",{class:"page-item",key:t},[(0,i._)("a",{class:(0,s.C_)(["page-style",{active:t===e.pages.current_page}]),href:"#",onClick:(0,r.iM)((a=>h.updatePage(t)),["prevent"])},(0,s.zw)(t),11,u)])))),128)),(0,i._)("li",g,[(0,i._)("a",{class:(0,s.C_)(["page-style",{disabled:!1===e.pages.has_next}]),href:"#","aria-label":"Next",onClick:a[1]||(a[1]=(0,r.iM)((t=>h.updatePage(e.pages.current_page+1)),["prevent"]))},_,2)])])])}var v={props:["pages"],methods:{updatePage(t){this.$emit("emit-pages",t)}}},m=e(89);const b=(0,m.Z)(v,[["render",h]]);var k=b},1535:function(t,a,e){e.r(a),e.d(a,{default:function(){return Q}});var i=e(3396),s=e(7139),r=e(9242);const o=(0,i._)("div",{class:"loadingio-spinner-double-ring-juf8237g2sc"},[(0,i._)("div",{class:"ldio-1prs6fceeog"},[(0,i._)("div"),(0,i._)("div"),(0,i._)("div",null,[(0,i._)("div")]),(0,i._)("div",null,[(0,i._)("div")])])],-1),c={class:"container-md main-product"},l={class:"row"},n={class:"col-md-3 col-lg-2 list"},d=(0,i._)("h2",null,"類別 /",-1),u={class:""},g=["onClick"],p={class:"col-md-9 col-lg-10 products"},_={"aria-label":"breadcrumb"},h={class:"breadcrumb"},v={class:"breadcrumb-item"},m={class:"breadcrumb-item active","aria-current":"page"},b={class:"row g-3"},k={class:"pic"},f=["src"],w={class:"card-body"},y={class:"card-title fs-5"},C={key:0,class:"card-text"},S={key:1,class:"card-text"},L={class:"group"},P=["onClick","disabled"],D=(0,i._)("i",{class:"bi bi-cart3"},null,-1),Z=[D],x=["onClick"],q={key:0,class:"bi bi-suit-heart-fill"},z={key:1,class:"bi bi-suit-heart"};function I(t,a,e,D,I,$){const M=(0,i.up)("Loading"),j=(0,i.up)("router-link"),E=(0,i.up)("Pagination");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(M,{active:t.isLoading},{default:(0,i.w5)((()=>[o])),_:1},8,["active"]),(0,i._)("main",c,[(0,i._)("div",l,[(0,i._)("aside",n,[d,(0,i._)("ul",u,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(I.tabs,((t,a)=>((0,i.wg)(),(0,i.iD)("li",{key:a},[(0,i._)("a",{href:"#",class:(0,s.C_)({active:t.title===I.tabState}),onClick:(0,r.iM)((a=>$.category(t.title)),["prevent"])},(0,s.zw)(t.title),11,g)])))),128))])]),(0,i._)("section",p,[(0,i._)("nav",_,[(0,i._)("ol",h,[(0,i._)("li",v,[(0,i.Wm)(j,{to:"/",class:"text-decoration-none text-dark"},{default:(0,i.w5)((()=>[(0,i.Uk)("首頁")])),_:1})]),(0,i._)("li",m,(0,s.zw)(I.tabState),1)])]),(0,i._)("div",b,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(I.productCategory,(a=>((0,i.wg)(),(0,i.iD)("div",{class:"col-sm-6 col-lg-4",key:a.id,"data-aos":"fade-up","data-aos-once":"true","data-aos-duration":"800","data-aos-offset":"0"},[(0,i._)("article",{class:(0,s.C_)(["",["card","product-card",{skeleton:t.isLoadSkeleton}]])},[(0,i.Wm)(j,{to:{name:"product",params:{product:a.id},query:{name:a.title}}},{default:(0,i.w5)((()=>[(0,i._)("div",k,[(0,i._)("img",{src:a.imageUrl,class:"card-img-top",alt:"產品圖"},null,8,f)])])),_:2},1032,["to"]),(0,i._)("div",w,[(0,i._)("h5",y,(0,s.zw)(t.isLoadSkeleton?"":a.title),1),a.price?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",C,(0,s.zw)(t.isLoadSkeleton?"":a.origin_price)+" 元 ",1)),a.price?((0,i.wg)(),(0,i.iD)("p",S," NT$ "+(0,s.zw)(t.isLoadSkeleton?"":a.origin_price),1)):(0,i.kq)("",!0),(0,i._)("div",L,[(0,i._)("div",{class:"shop",onClick:e=>t.addToCart(a.id),disabled:t.cartLoading==a.id},Z,8,P),(0,i._)("div",{class:(0,s.C_)(["heart",{active:I.favoriteItems.includes(a.id)}]),onClick:e=>t.toggleFavorite(a.id)},[I.favoriteItems.includes(a.id)?((0,i.wg)(),(0,i.iD)("i",q)):((0,i.wg)(),(0,i.iD)("i",z))],10,x)])])],2)])))),128))])])]),(0,i.Wm)(E,{pages:I.pagination,onEmitPages:$.setPagination},null,8,["pages","onEmitPages"])])],64)}e(7658);var $=e(8557),M=e(1020),j=e(4238),E=e(4677),H=e(6294),W=e(978),Y=e(8073),K=e(6905),T=e.n(K),U={components:{Pagination:Y.Z},mixins:[W.Z],provide(){return{emitter:$.Z}},data(){return{product:{},favoriteItems:this.getLocalFavorite()||[],tabs:[{title:"全部"},{title:"兔子"},{title:"飼料"},{title:"兔用品"}],tabState:"",pagination:{current_page:1,total_pages:1,has_pre:!1,has_next:!0},productCategory:[]}},computed:{...(0,M.rn)(j.Z,["products","isLoadSkeleton"]),...(0,M.rn)(H.Z,["isLoading","cartLoading"]),filterData(){let t=[];return"全部"==this.tabState?t=this.products:this.tabState&&(t=this.products.filter((t=>t.category==this.tabState))),t}},watch:{filterData(){this.setPagination()},$route(){this.tabState=this.$route.query.category}},methods:{...(0,M.nv)(j.Z,["getProducts"]),...(0,M.nv)(E.Z,["addToCart","getCart"]),category(t){this.$router.push({name:"products",query:{category:t}}),this.tabState=t},setPagination(t=1){const a=[...this.filterData],e=Math.ceil(a.length/10);this.pagination={current_page:t,total_pages:e,has_pre:t>1,has_next:t<e},this.productCategory=a.splice(9*(t-1),9*t)}},created(){this.getProducts(),this.getCart(),this.tabState=this.$route.query.category||"全部",T().init({})}},F=e(89);const N=(0,F.Z)(U,[["render",I]]);var Q=N}}]);
//# sourceMappingURL=535.32ec5446.js.map