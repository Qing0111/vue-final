"use strict";(self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[]).push([[174],{8557:function(t,e,i){i.d(e,{Z:function(){return r}});i(7658);function s(t){return{all:t=t||new Map,on:function(e,i){var s=t.get(e);s?s.push(i):t.set(e,[i])},off:function(e,i){var s=t.get(e);s&&(i?s.splice(s.indexOf(i)>>>0,1):t.set(e,[]))},emit:function(e,i){var s=t.get(e);s&&s.slice().map((function(t){t(i)})),(s=t.get("*"))&&s.slice().map((function(t){t(e,i)}))}}}const a=s();var r=a},978:function(t,e,i){i(7658);var s=i(8557),a=i(1020),r=i(6294);e["Z"]={computed:{},methods:{...(0,a.nv)(r.Z,["pushMessage"]),toggleFavorite(t){this.favoriteItems.includes(t)?(this.favoriteItems.splice(this.favoriteItems.indexOf(t),1),this.pushMessage(!0,{title:"移除收藏"})):(this.favoriteItems.push(t),this.pushMessage(!0,{title:"加入收藏"})),localStorage.setItem("favoriteItems",JSON.stringify(this.favoriteItems)),s.Z.emit("updateFavorite")},clearLocal(){this.favoriteProduct.splice(0,this.favoriteItems.length),this.favoriteItems=[],localStorage.setItem("favoriteItems",JSON.stringify(this.favoriteItems)),this.pushMessage(!0,{title:"清除"}),s.Z.emit("updateFavorite"),this.$refs.delModal.hideModal()},getLocalFavorite(){return JSON.parse(localStorage.getItem("favoriteItems"))}}}},4677:function(t,e,i){var s=i(4311),a=i(1020),r=i(6294);const c=(0,r.Z)();e["Z"]=(0,a.Q_)("cartStore",{state:()=>({cart:[]}),actions:{addToCart(t,e=1){c.cartLoading=t;const i="https://vue3-course-api.hexschool.io/api/qing-api/cart",a={product_id:t,qty:e};s.Z.post(i,{data:a}).then((t=>{c.cartLoading="",c.pushMessage(t.data.success,{title:"加入購物車"}),this.getCart()}))},getCart(){const t="https://vue3-course-api.hexschool.io/api/qing-api/cart";c.isLoading=!0,s.Z.get(t).then((t=>{this.cart=t.data.data,c.isLoading=!1}))},updateCart(t,e){console.log(t);const i=`https://vue3-course-api.hexschool.io/api/qing-api/cart/${t.id}`;c.isLoading=!0,c.cartLoading=t.id;const a={product_id:t.product_id,qty:e};s.Z.put(i,{data:a}).then((()=>{c.isLoading=!1,c.cartLoading="",this.getCart()}))},removeCartItem(t){const e=`https://vue3-course-api.hexschool.io/api/qing-api/cart/${t}`;c.isLoading=!0,s.Z["delete"](e).then((t=>{t.data.success&&(c.isLoading=!1,console.log(t),c.pushMessage(t.data.success,{title:"刪除"}),this.getCart())}))}}})},1174:function(t,e,i){i.r(e),i.d(e,{default:function(){return ot}});var s=i(3396),a=i(7139),r=i(9242);const c=(0,s._)("div",{class:"loadingio-spinner-double-ring-juf8237g2sc"},[(0,s._)("div",{class:"ldio-1prs6fceeog"},[(0,s._)("div"),(0,s._)("div"),(0,s._)("div",null,[(0,s._)("div")]),(0,s._)("div",null,[(0,s._)("div")])])],-1),o={class:"container-md user-product"},l={"aria-label":"breadcrumb"},d={class:"breadcrumb"},n={class:"breadcrumb-item"},u={class:"breadcrumb-item"},p={class:"breadcrumb-item active","aria-current":"page"},g={class:"row justify-content-center product-detail"},m={class:"col-md-6 mb-3"},h=["src"],w=["src"],f=["src"],_=["src"],v={class:"col-md-6"},b={class:"h3 mb-1"},y={class:"h1 fs-3 mb-3 text-brown-deep"},k={key:0,class:"h5 fs-4"},C={class:"d-flex fs-5 gap-1 mb-4"},x={key:0,class:"h5"},I={key:1,class:"h6 text-muted align-self-end",style:{"font-size":"14px"}},S={class:"mb-4"},Z={class:"description"},L={class:""},D={class:"input-group mb-3"},q={class:"d-flex align-items-center gap-3"},$={key:0,class:"bi bi-suit-heart-fill"},z={key:1,class:"bi bi-suit-heart"},P=(0,s._)("span",{class:"ms-1"},"加入收藏",-1),T={class:"related-products"},W=(0,s._)("h2",null,"您可能會感興趣的商品",-1),M={class:"card product-card"},U={class:"pic"},j=["src"],F={class:"card-body"},N={class:"card-title fs-5"},O={key:0,class:"card-text"},V={key:1,class:"card-text"},H={class:"group"},Y=["onClick","disabled"],B=(0,s._)("i",{class:"bi bi-cart3"},null,-1),J=[B],K=["onClick"],R={key:0,class:"bi bi-suit-heart-fill"},Q={key:1,class:"bi bi-suit-heart"};function A(t,e,i,B,A,E){const G=(0,s.up)("Loading"),X=(0,s.up)("router-link"),tt=(0,s.up)("swiper-slide"),et=(0,s.up)("swiper");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(G,{active:t.isLoading},{default:(0,s.w5)((()=>[c])),_:1},8,["active"]),(0,s._)("main",o,[(0,s._)("nav",l,[(0,s._)("ol",d,[(0,s._)("li",n,[(0,s.Wm)(X,{to:"/products",class:"text-decoration-none text-dark"},{default:(0,s.w5)((()=>[(0,s.Uk)("首頁")])),_:1})]),(0,s._)("li",u,[(0,s.Wm)(X,{to:`/products?category=${A.product.category}`,class:"text-decoration-none text-dark"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(A.product.category),1)])),_:1},8,["to"])]),(0,s._)("li",p,(0,a.zw)(A.product.title),1)])]),(0,s._)("section",g,[(0,s._)("article",m,[(0,s.Wm)(et,{ref:"{swiperRef}",slidesPerView:1,spaceBetween:10,thumbs:{swiper:A.thumbsSwiper},class:"mySwiper2"},{default:(0,s.w5)((()=>[(0,s.Wm)(tt,null,{default:(0,s.w5)((()=>[(0,s._)("img",{src:A.product.imageUrl,alt:"商品圖",class:"img-fluid"},null,8,h)])),_:1}),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(A.product.imagesUrl,((t,e)=>((0,s.wg)(),(0,s.j4)(tt,{key:e},{default:(0,s.w5)((()=>[(0,s._)("img",{src:t,alt:"商品圖"},null,8,w)])),_:2},1024)))),128))])),_:1},8,["thumbs"]),(0,s.Wm)(et,{ref:"{swiperRef}",onSwiper:E.setThumbsSwiper,slidesPerView:4,spaceBetween:4,navigation:!0,watchSlidesProgress:!0,class:"mySwiper"},{default:(0,s.w5)((()=>[(0,s.Wm)(tt,null,{default:(0,s.w5)((()=>[(0,s._)("img",{src:A.product.imageUrl,alt:"商品圖",class:"img-fluid"},null,8,f)])),_:1}),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(A.product.imagesUrl,((t,e)=>((0,s.wg)(),(0,s.j4)(tt,{key:e},{default:(0,s.w5)((()=>[(0,s._)("img",{src:t,alt:"商品圖"},null,8,_)])),_:2},1024)))),128))])),_:1},8,["onSwiper"])]),(0,s._)("article",v,[(0,s._)("h5",b,(0,a.zw)(A.product.category),1),(0,s._)("h2",y,(0,a.zw)(A.product.title),1),A.product.price==A.product.origin_price?((0,s.wg)(),(0,s.iD)("p",k," NT$ "+(0,a.zw)(A.product.origin_price)+" 元 ",1)):(0,s.kq)("",!0),(0,s._)("article",C,[A.product.price!==A.product.origin_price?((0,s.wg)(),(0,s.iD)("p",x," NT$ "+(0,a.zw)(A.product.price)+" 元 ",1)):(0,s.kq)("",!0),A.product.price!==A.product.origin_price?((0,s.wg)(),(0,s.iD)("del",I,"NT$ "+(0,a.zw)(A.product.origin_price)+" 元",1)):(0,s.kq)("",!0)]),(0,s._)("article",S,[(0,s._)("p",Z,(0,a.zw)(A.product.description),1)]),(0,s._)("article",L,[(0,s._)("div",D,[(0,s._)("button",{type:"button",class:"btn btn-yellow-deep text-white fs-5",onClick:e[0]||(e[0]=(...t)=>E.reduce&&E.reduce(...t))}," - "),(0,s.wy)((0,s._)("input",{type:"number",class:"form-control text-center",min:"1","onUpdate:modelValue":e[1]||(e[1]=t=>A.num=t)},null,512),[[r.nr,A.num,void 0,{number:!0}]]),(0,s._)("button",{type:"button",class:"btn btn-yellow-deep text-white fs-5",onClick:e[2]||(e[2]=(...t)=>E.add&&E.add(...t))}," + ")]),(0,s._)("article",q,[(0,s._)("button",{type:"button",class:"btn btn-yellow text-white w-50",onClick:e[3]||(e[3]=e=>t.addToCart(A.product.id,A.num))}," 加入購物車 "),(0,s._)("button",{type:"button",class:(0,a.C_)(["heart btn w-50",{active:A.favoriteItems.includes(A.product.id)}]),onClick:e[4]||(e[4]=e=>t.toggleFavorite(A.id))},[A.favoriteItems.includes(A.product.id)?((0,s.wg)(),(0,s.iD)("i",$)):((0,s.wg)(),(0,s.iD)("i",z)),P],2)])])])]),(0,s._)("section",T,[W,(0,s.Wm)(et,{ref:"{swiperRef}",slidesPerView:1,spaceBetween:30,navigation:!0,breakpoints:{768:{slidesPerView:3}},class:"mySwiper"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(E.filterData,((e,i)=>((0,s.wg)(),(0,s.j4)(tt,{key:i},{default:(0,s.w5)((()=>[(0,s._)("article",M,[(0,s.Wm)(X,{to:{name:"product",params:{product:e.id},query:{name:e.title}}},{default:(0,s.w5)((()=>[(0,s._)("div",U,[(0,s._)("img",{src:e.imageUrl,class:"card-img-top",alt:"圖片"},null,8,j)])])),_:2},1032,["to"]),(0,s._)("div",F,[(0,s._)("h5",N,(0,a.zw)(e.title),1),e.price?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",O,(0,a.zw)(e.origin_price)+" 元 ",1)),e.price?((0,s.wg)(),(0,s.iD)("p",V," NT$"+(0,a.zw)(e.origin_price),1)):(0,s.kq)("",!0),(0,s._)("div",H,[(0,s._)("div",{class:"text-yellow shop",onClick:i=>t.addToCart(e.id),disabled:t.cartLoading==e.id},J,8,Y),(0,s._)("div",{class:(0,a.C_)(["heart",{active:A.favoriteItems.includes(e.id)}]),onClick:i=>t.toggleFavorite(e.id)},[A.favoriteItems.includes(e.id)?((0,s.wg)(),(0,s.iD)("i",R)):((0,s.wg)(),(0,s.iD)("i",Q))],10,K)])])])])),_:2},1024)))),128))])),_:1},512)])])],64)}var E=i(1020),G=i(4238),X=i(4677),tt=i(6294),et=i(978),it=i(5032),st=i(3390);st.ZP.use([st.tl,st.W_,st.o3]);var at={components:{Swiper:it.tq,SwiperSlide:it.o5},data(){return{product:{},id:"",num:1,favoriteItems:this.getLocalFavorite()||[],thumbsSwiper:""}},mixins:[et.Z],computed:{...(0,E.rn)(G.Z,["products"]),...(0,E.rn)(X.Z,["cart"]),...(0,E.rn)(tt.Z,["isLoading","cartLoading"]),filterData(){let t=[];return t=this.products.filter((t=>t.category==this.product.category&&t.title!==this.product.title)),t}},methods:{...(0,E.nv)(G.Z,["getProducts"]),...(0,E.nv)(X.Z,["addToCart","getCart","updateCart","removeCartItem"]),getProduct(){const t=`https://vue3-course-api.hexschool.io/api/qing-api/product/${this.id}`;this.$http.get(t).then((t=>{t.data.success&&(this.product=t.data.product)}))},setThumbsSwiper(t){this.thumbsSwiper=t},reduce(){this.num>1&&this.num--},add(){this.num++}},watch:{$route(){this.id=this.$route.params.product,this.getProduct()}},created(){this.id=this.$route.params.product,this.getProduct(),this.getProducts()}},rt=i(89);const ct=(0,rt.Z)(at,[["render",A]]);var ot=ct}}]);
//# sourceMappingURL=174.6530f300.js.map