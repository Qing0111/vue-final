{"version":3,"file":"js/874.32145b47.js","mappings":"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","sources":["webpack://vue-project/./src/stores/cartStore.js","webpack://vue-project/./src/stores/productStore.js","webpack://vue-project/./src/components/ShopProcess.vue","webpack://vue-project/./src/components/ShopProcess.vue?a33a","webpack://vue-project/./src/views/front/UserCart.vue","webpack://vue-project/./src/views/front/UserCart.vue?4615"],"sourcesContent":["import axios from \"axios\";\r\nimport { defineStore } from \"pinia\";\r\nimport statusStore from \"./statusStore\";\r\n\r\nconst status = statusStore();\r\n\r\nexport default defineStore(\"cartStore\", {\r\n  state: () => {\r\n    return {\r\n      cart: [],\r\n    };\r\n  },\r\n\r\n  actions: {\r\n    addToCart(id, qty = 1) {\r\n      // console.log(id);\r\n      status.cartLoading = id;\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`;\r\n      const cart = {\r\n        product_id: id,\r\n        qty,\r\n      };\r\n      axios.post(url, { data: cart }).then((res) => {\r\n        status.cartLoading = \"\";\r\n        // console.log(res.data);\r\n        status.pushMessage(res.data.success, { title: \"加入購物車\" });\r\n        this.getCart();\r\n      });\r\n    },\r\n    getCart() {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`;\r\n      status.isLoading = true;\r\n      axios.get(url).then((res) => {\r\n        // console.log(\"card\", res.data.data);\r\n        this.cart = res.data.data;\r\n        status.isLoading = false;\r\n      });\r\n    },\r\n    updateCart(item, qty) {\r\n      console.log(item);\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\r\n      status.isLoading = true;\r\n      status.cartLoading = item.id;\r\n      const cart = {\r\n        product_id: item.product_id,\r\n        qty: qty,\r\n      };\r\n      axios.put(url, { data: cart }).then(() => {\r\n        // console.log(res);\r\n        status.isLoading = false;\r\n        status.cartLoading = \"\";\r\n        this.getCart();\r\n      });\r\n    },\r\n    removeCartItem(id) {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`;\r\n      status.isLoading = true;\r\n      axios.delete(url).then((res) => {\r\n        if (res.data.success) {\r\n          status.isLoading = false;\r\n          console.log(res);\r\n          status.pushMessage(res.data.success, { title: \"刪除\" });\r\n          this.getCart();\r\n        }\r\n      });\r\n    },\r\n  },\r\n});\r\n","import axios from \"axios\";\r\nimport { defineStore } from \"pinia\";\r\nimport statusStore from \"./statusStore\";\r\n\r\nconst status = statusStore();\r\n\r\nexport default defineStore(\"productStore\", {\r\n  state: () => {\r\n    return {\r\n      products: [],\r\n      isLoadSkeleton: true,\r\n    };\r\n  },\r\n  actions: {\r\n    loadImg(imgUrl) {\r\n      const imgArr = [...imgUrl];\r\n      let i = 0;\r\n      imgArr.forEach((src) => {\r\n        const img = new Image();\r\n        // console.log(src);\r\n        img.src = src;\r\n        img.addEventListener('load', () => {\r\n          i += 1;\r\n          if (i === imgArr.length) {\r\n            this.isLoadSkeleton = false;\r\n          }\r\n        });\r\n      });\r\n    },\r\n    getProducts() {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`;\r\n      status.isLoading = true;\r\n      axios.get(url).then((res) => {\r\n        const imgArr = res.data.products.map((item) => [item.imageUrl]);\r\n        this.loadImg([].concat(...imgArr));\r\n\r\n        this.products = res.data.products;\r\n        // console.log(\"products:\", res);\r\n        status.isLoading = false;\r\n      });\r\n    },\r\n  },\r\n});\r\n","<template>\r\n  <section class=\"process\">\r\n    <article>\r\n      <h2 class=\"active\">1</h2>\r\n      <p>購物車</p>\r\n    </article>\r\n    <article>\r\n      <h2\r\n        :class=\"{\r\n          active:\r\n            this.$route.path == '/material' ||\r\n            this.$route.path == `/material/${orderId}` ||\r\n            this.$route.path == `/orderCompleted/${orderId}`,\r\n        }\"\r\n      >\r\n        2\r\n      </h2>\r\n      <p>填寫資料</p>\r\n    </article>\r\n    <article>\r\n      <h2\r\n        :class=\"{\r\n          active:\r\n            this.$route.path == `/material/${orderId}` ||\r\n            this.$route.path == `/orderCompleted/${orderId}`,\r\n        }\"\r\n      >\r\n        3\r\n      </h2>\r\n      <p>確認訂單</p>\r\n    </article>\r\n    <article>\r\n      <h2\r\n        :class=\"{\r\n          active: this.$route.path == `/orderCompleted/${orderId}`,\r\n        }\"\r\n      >\r\n        4\r\n      </h2>\r\n      <p>訂單完成</p>\r\n    </article>\r\n  </section>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n.process {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-bottom: 40px;\r\n  article {\r\n    text-align: center;\r\n    h2 {\r\n      margin: 20px;\r\n      width: 44px;\r\n      height: 44px;\r\n      line-height: 40px;\r\n      border: 2px dashed #000;\r\n      border-radius: 50%;\r\n      position: relative;\r\n      &::after {\r\n        content: \"\";\r\n        position: absolute;\r\n        border-bottom: 2px dashed #000;\r\n        width: 44px;\r\n        top: 50%;\r\n        right: 100%;\r\n      }\r\n    }\r\n    &:first-child h2::after {\r\n      width: 0;\r\n      border-bottom: none;\r\n    }\r\n    &:first-child h2.active {\r\n      border-style: solid;\r\n    }\r\n    &:nth-child(2) h2.active {\r\n      border-style: solid;\r\n      &::after {\r\n        border-bottom: 2px solid #000;\r\n      }\r\n    }\r\n    &:nth-child(3) h2.active {\r\n      border-style: solid;\r\n      &::after {\r\n        border-bottom: 2px solid #000;\r\n      }\r\n    }\r\n    &:last-child h2.active {\r\n      border-style: solid;\r\n      &::after {\r\n        border-bottom: 2px solid #000;\r\n      }\r\n    }\r\n  }\r\n}\r\n@media (min-width: 576px) {\r\n  .process {\r\n    margin-bottom: 48px;\r\n    article {\r\n      h2 {\r\n        margin: 20px 40px;\r\n        width: 60px;\r\n        height: 60px;\r\n        line-height: 60px;\r\n        &::after {\r\n          width: 84px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<script>\r\nexport default {\r\n  props: [\"orderId\"],\r\n  created() {\r\n    // console.log(this.orderId);\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./ShopProcess.vue?vue&type=template&id=cb1c6f3c\"\nimport script from \"./ShopProcess.vue?vue&type=script&lang=js\"\nexport * from \"./ShopProcess.vue?vue&type=script&lang=js\"\n\nimport \"./ShopProcess.vue?vue&type=style&index=0&id=cb1c6f3c&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\Eason\\\\Documents\\\\GitHub\\\\vue-final\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <Loading :active=\"isLoading\">\r\n    <div class=\"loadingio-spinner-double-ring-juf8237g2sc\">\r\n      <div class=\"ldio-1prs6fceeog\">\r\n        <div></div>\r\n        <div></div>\r\n        <div><div></div></div>\r\n        <div><div></div></div>\r\n      </div>\r\n    </div>\r\n  </Loading>\r\n  <main class=\"container-md user-cart\">\r\n    <process></process>\r\n    <transition name=\"switch\" mode=\"out-in\">\r\n      <section class=\"mt-4\" v-if=\"cart.total\">\r\n        <!-- 購物車列表 -->\r\n        <div class=\"table-responsive\">\r\n          <table class=\"table\">\r\n            <thead class=\"\">\r\n              <tr class=\"\">\r\n                <th scope=\"col\" class=\"py-3\" width=\"10%\">圖片</th>\r\n                <th scope=\"col\" width=\"30%\">商品名稱</th>\r\n                <th scope=\"col\" width=\"16%\">數量</th>\r\n                <th scope=\"col\" width=\"36%\">金額</th>\r\n                <th scope=\"col\" width=\"10%\"></th>\r\n              </tr>\r\n            </thead>\r\n            <transition-group tag=\"tbody\" name=\"list\" appear>\r\n              <template v-if=\"cart\">\r\n                <tr v-for=\"item in cart.carts\" :key=\"item.id\">\r\n                  <td>\r\n                    <router-link\r\n                      :to=\"{\r\n                        name: 'product',\r\n                        params: { product: item.product_id },\r\n                        query: { name: item.product.title },\r\n                      }\"\r\n                    >\r\n                      <img\r\n                        :src=\"item.product.imageUrl\"\r\n                        alt=\"產品圖\"\r\n                        width=\"100\"\r\n                        height=\"100\"\r\n                        style=\"object-fit: cover\"\r\n                      />\r\n                    </router-link>\r\n                    <h2 class=\"d-sm-none mt-1\">{{ item.product.title }}</h2>\r\n                  </td>\r\n                  <td class=\"align-middle d-none d-sm-table-cell\">\r\n                    {{ item.product.title }}\r\n                    <!-- <div class=\"text-success\" v-if=\"item.coupon\">\r\n                    已套用優惠券\r\n                  </div> -->\r\n                  </td>\r\n                  <td class=\"align-middle\">\r\n                    <div class=\"d-flex count-group\">\r\n                      <button\r\n                        type=\"button\"\r\n                        class=\"btn btn-light fs-5 rounded-0\"\r\n                        @click=\"updateCart(item, --item.qty)\"\r\n                        :disabled=\"item.id == cartLoading || item.qty <= 1\"\r\n                      >\r\n                        -\r\n                      </button>\r\n                      <input\r\n                        type=\"number\"\r\n                        class=\"form-control text-center rounded-0\"\r\n                        min=\"1\"\r\n                        @change=\"updateCart(item, item.qty)\"\r\n                        :disabled=\"item.id == cartLoading\"\r\n                        v-model.number=\"item.qty\"\r\n                      />\r\n                      <button\r\n                        type=\"button\"\r\n                        class=\"btn btn-light fs-5 rounded-0\"\r\n                        @click=\"updateCart(item, ++item.qty)\"\r\n                        :disabled=\"item.id == cartLoading\"\r\n                      >\r\n                        +\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                  <td class=\"align-middle\">\r\n                    <small\r\n                      v-if=\"cart.final_total !== cart.total\"\r\n                      class=\"text-muted text-decoration-line-through d-block\"\r\n                      style=\"font-size: 14px\"\r\n                      >NT$ {{ $filters.currency(item.total) }}</small\r\n                    >\r\n                    NT$ {{ $filters.currency(item.final_total) }}\r\n                  </td>\r\n                  <td class=\"align-middle\">\r\n                    <a\r\n                      href=\"#\"\r\n                      class=\"text-secondary\"\r\n                      :disabled=\"cartLoading === item.id\"\r\n                      @click.prevent=\"removeCartItem(item.id)\"\r\n                    >\r\n                      <i class=\"bi bi-trash3\"></i>\r\n                    </a>\r\n                  </td>\r\n                </tr>\r\n              </template>\r\n            </transition-group>\r\n            <tfoot>\r\n              <tr>\r\n                <!-- <td colspan=\"1\" class=\"d-none d-sm-table-cell\"></td> -->\r\n                <td colspan=\"5\"></td>\r\n              </tr>\r\n            </tfoot>\r\n          </table>\r\n          <div\r\n            class=\"d-sm-flex justify-content-center align-items-center gap-5\"\r\n          >\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-brown text-white w-100 mb-3 mb-sm-0\"\r\n              @click=\"openDelModal\"\r\n            >\r\n              清空購物車\r\n            </button>\r\n            <div class=\"input-group\">\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                v-model=\"coupon_code\"\r\n                placeholder=\"請輸入優惠碼\"\r\n              />\r\n              <div class=\"input-group-append\">\r\n                <button\r\n                  class=\"btn btn-brown text-white rounded-0 rounded-end\"\r\n                  type=\"button\"\r\n                  @click=\"addCouponCode\"\r\n                >\r\n                  套用優惠碼\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <article class=\"d-flex align-items-end flex-column mt-5 gap-3\">\r\n            <p>小計: NT$ {{ $filters.currency(cart.total) }}</p>\r\n            <p>\r\n              折扣金額: NT$\r\n              {{ $filters.currency(cart.final_total - cart.total) }}\r\n            </p>\r\n          </article>\r\n          <article class=\"d-flex justify-content-between mt-4\">\r\n            <router-link\r\n              to=\"/products?category=全部\"\r\n              class=\"btn btn-yellow-deep text-white\"\r\n              >繼續購物</router-link\r\n            >\r\n            <p class=\"fw-bold align-self-center fs-4\">\r\n              總計: NT$ {{ $filters.currency(cart.final_total) }}\r\n            </p>\r\n            <!-- <p class=\"fw-bold align-self-center fs-4\" v-else>\r\n            折價後: NT$ {{ $filters.currency(cart.final_total) }}\r\n          </p> -->\r\n            <router-link to=\"/material\" class=\"btn btn-yellow text-white\"\r\n              >下一步</router-link\r\n            >\r\n          </article>\r\n        </div>\r\n      </section>\r\n      <section class=\"empty-cart\" v-else>\r\n        <article class=\"\">\r\n          <h2>目前您的購物車沒有任何商品!</h2>\r\n          <router-link\r\n            to=\"/products?category=全部\"\r\n            class=\"btn btn-yellow text-white\"\r\n            >來去購物</router-link\r\n          >\r\n        </article>\r\n      </section>\r\n    </transition>\r\n  </main>\r\n  <DelModal ref=\"delModal\" @del-item=\"delAllCart\"></DelModal>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n.user-cart {\r\n  padding: 60px 20px;\r\n  min-height: calc(100vh - 158px);\r\n  table {\r\n    thead {\r\n      display: none;\r\n      tr {\r\n        border-top: 2px solid #54433c;\r\n        border-bottom: 1px solid #54433c;\r\n      }\r\n    }\r\n    tbody {\r\n      position: relative;\r\n      .list-enter-from,\r\n      .list-leave-to {\r\n        opacity: 0;\r\n        transform: scale(0.6);\r\n      }\r\n      .list-enter-active {\r\n        transition: all 0.4s ease;\r\n      }\r\n      .list-leave-active {\r\n        transition: all 0.4s ease;\r\n        position: absolute;\r\n      }\r\n      .list-move {\r\n        transition: all 0.3s ease;\r\n      }\r\n      tr {\r\n        border-bottom: 1px solid #54433c;\r\n      }\r\n    }\r\n    .count-group {\r\n      height: 32px;\r\n      button {\r\n        line-height: 10px;\r\n        width: 24px;\r\n        padding: 0px;\r\n      }\r\n      input[type=\"number\"] {\r\n        -moz-appearance: textfield;\r\n        width: 40px !important;\r\n        padding: 6px;\r\n        box-shadow: inset 1px 1px 1px rgb(236, 236, 236);\r\n      }\r\n      input[type=\"number\"]::-webkit-inner-spin-button,\r\n      input[type=\"number\"]::-webkit-outer-spin-button {\r\n        -webkit-appearance: none;\r\n        margin: 0;\r\n      }\r\n    }\r\n  }\r\n  .empty-cart {\r\n    min-height: calc(100vh - 600px);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    text-align: center;\r\n    h2 {\r\n      font-size: 24px;\r\n      font-weight: bold;\r\n      margin-bottom: 20px;\r\n    }\r\n  }\r\n}\r\n.switch-enter-from,\r\n.switch-leave-to {\r\n  opacity: 0;\r\n  transform: translateY(20px);\r\n}\r\n.switch-enter-active,\r\n.switch-leave-active {\r\n  transition: transform 0.4s ease, opacity 0.6s ease;\r\n}\r\n\r\n@media (min-width: 768px) {\r\n  .user-cart {\r\n    table {\r\n      .count-group {\r\n        button {\r\n          width: 32px;\r\n          padding: 0px;\r\n        }\r\n        input[type=\"number\"] {\r\n          width: 60px !important;\r\n          padding: 6px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n@media (min-width: 576px) {\r\n  .user-cart {\r\n    table {\r\n      thead {\r\n        display: table-header-group;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<script>\r\nimport { mapState, mapActions } from \"pinia\";\r\nimport productStore from \"@/stores/productStore\";\r\nimport cartStore from \"@/stores/cartStore\";\r\nimport statusStore from \"@/stores/statusStore\";\r\nimport process from \"@/components/ShopProcess.vue\";\r\nimport DelModal from \"@/components/DelModal.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    process,\r\n    DelModal,\r\n  },\r\n  data() {\r\n    return {\r\n      product: {},\r\n      coupon_code: \"\",\r\n      form: {\r\n        user: {\r\n          name: \"\",\r\n          email: \"\",\r\n          tel: \"\",\r\n          address: \"\",\r\n        },\r\n        message: \"\",\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState(cartStore, [\"cart\"]),\r\n    ...mapState(statusStore, [\"isLoading\", \"cartLoading\"]),\r\n  },\r\n  methods: {\r\n    ...mapActions(productStore, [\"getProducts\"]),\r\n    ...mapActions(cartStore, [\r\n      \"addToCart\",\r\n      \"getCart\",\r\n      \"updateCart\",\r\n      \"removeCartItem\",\r\n    ]),\r\n    ...mapActions(statusStore, [\"pushMessage\"]),\r\n\r\n    getProduct(id) {\r\n      this.$router.push(`/user/product/${id}`);\r\n    },\r\n    openDelModal() {\r\n      this.$refs.delModal.showModal();\r\n    },\r\n    delAllCart() {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/carts`;\r\n      this.$http.delete(url).then((res) => {\r\n        this.$refs.delModal.hideModal();\r\n        this.pushMessage(res.data.success, { title: \"清除\" });\r\n        this.getCart();\r\n      });\r\n    },\r\n    addCouponCode() {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/coupon`;\r\n      const coupon = {\r\n        code: this.coupon_code,\r\n      };\r\n      this.$http.post(url, { data: coupon }).then((res) => {\r\n        console.log(res);\r\n        this.getCart();\r\n      });\r\n    },\r\n  },\r\n  created() {\r\n    this.getCart();\r\n    this.getProducts();\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./UserCart.vue?vue&type=template&id=6755aaa3\"\nimport script from \"./UserCart.vue?vue&type=script&lang=js\"\nexport * from \"./UserCart.vue?vue&type=script&lang=js\"\n\nimport \"./UserCart.vue?vue&type=style&index=0&id=6755aaa3&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\Eason\\\\Documents\\\\GitHub\\\\vue-final\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["status","statusStore","defineStore","state","cart","actions","addToCart","id","qty","cartLoading","url","product_id","axios","data","then","res","pushMessage","success","title","this","getCart","isLoading","updateCart","item","console","log","removeCartItem","products","isLoadSkeleton","loadImg","imgUrl","imgArr","i","forEach","src","img","Image","addEventListener","length","getProducts","map","imageUrl","concat","class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","$route","path","$props","_hoisted_3","_hoisted_4","_hoisted_5","props","created","__exports__","render","scope","width","style","_hoisted_19","colspan","_createVNode","_component_Loading","active","_ctx","_component_process","_Transition","name","mode","total","_hoisted_6","_TransitionGroup","tag","appear","_Fragment","key","carts","_component_router_link","to","product","alt","height","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","type","onClick","disabled","min","onChange","_hoisted_15","final_total","_hoisted_16","currency","_hoisted_17","href","_hoisted_21","_hoisted_22","$options","_hoisted_23","$data","placeholder","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_component_DelModal","ref","onDelItem","components","process","DelModal","coupon_code","form","user","email","tel","address","message","computed","mapState","cartStore","methods","mapActions","productStore","getProduct","$router","push","openDelModal","$refs","delModal","showModal","delAllCart","$http","delete","hideModal","addCouponCode","coupon","code","post"],"sourceRoot":""}