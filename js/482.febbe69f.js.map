{"version":3,"file":"js/482.febbe69f.js","mappings":"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","sources":["webpack://vue-project/./src/components/Pagination.vue","webpack://vue-project/./src/components/Pagination.vue?33dc","webpack://vue-project/./src/views/back/Coupons.vue","webpack://vue-project/./src/components/CouponModal.vue","webpack://vue-project/./src/components/CouponModal.vue?3d2f","webpack://vue-project/./src/views/back/Coupons.vue?6eac"],"sourcesContent":["<template>\r\n  <nav aria-label=\"Page navigation example\">\r\n    <ul class=\"pagination justify-content-center\">\r\n      <li class=\"page-item\">\r\n        <a\r\n          class=\"page-style\"\r\n          href=\"#\"\r\n          aria-label=\"Previous\"\r\n          @click.prevent=\"updatePage(pages.current_page - 1)\"\r\n          :class=\"{ disabled: pages.has_pre === false }\"\r\n        >\r\n          <span aria-hidden=\"true\">&laquo;</span>\r\n        </a>\r\n      </li>\r\n      <li class=\"page-item\" v-for=\"page in pages.total_pages\" :key=\"page\">\r\n        <a\r\n          class=\"page-style\"\r\n          href=\"#\"\r\n          @click.prevent=\"updatePage(page)\"\r\n          :class=\"{ active: page === pages.current_page }\"\r\n          >{{ page }}</a\r\n        >\r\n      </li>\r\n      <li class=\"page-item\">\r\n        <a\r\n          class=\"page-style\"\r\n          href=\"#\"\r\n          aria-label=\"Next\"\r\n          @click.prevent=\"updatePage(pages.current_page + 1)\"\r\n          :class=\"{ disabled: pages.has_next === false }\"\r\n        >\r\n          <span aria-hidden=\"true\">&raquo;</span>\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  </nav>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n.page-item {\r\n  .page-style {\r\n    display: inline-block;\r\n    text-align: center;\r\n    line-height: 28px;\r\n    text-decoration: none;\r\n    color: #54433c;\r\n    width: 28px;\r\n    height: 28px;\r\n    margin: 0 4px;\r\n    &:hover,\r\n    &.active {\r\n      background-color: #c8a472;\r\n      color: #fff;\r\n    }\r\n    &.disabled {\r\n      pointer-events: none;\r\n      cursor: default;\r\n      opacity: 0.6;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<script>\r\nexport default {\r\n  props: [\"pages\"],\r\n  methods: {\r\n    updatePage(page) {\r\n      this.$emit(\"emit-pages\", page);\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./Pagination.vue?vue&type=template&id=61fe491f\"\nimport script from \"./Pagination.vue?vue&type=script&lang=js\"\nexport * from \"./Pagination.vue?vue&type=script&lang=js\"\n\nimport \"./Pagination.vue?vue&type=style&index=0&id=61fe491f&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\Eason\\\\Documents\\\\GitHub\\\\vue-final\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <Loading :active=\"isLoading\">\r\n    <div class=\"loadingio-spinner-double-ring-juf8237g2sc\">\r\n      <div class=\"ldio-1prs6fceeog\">\r\n        <div></div>\r\n        <div></div>\r\n        <div><div></div></div>\r\n        <div><div></div></div>\r\n      </div>\r\n    </div>\r\n  </Loading>\r\n  <main class=\"container-md back\">\r\n    <div class=\"text-end\">\r\n      <button class=\"btn btn-yellow text-white\" @click=\"openCouponModal(true)\">\r\n        建立新的優惠券\r\n      </button>\r\n    </div>\r\n    <section class=\"coupons mb-4\">\r\n      <table class=\"table table-hover mt-4\">\r\n        <thead class=\"bg-brown-deep text-white\">\r\n          <tr>\r\n            <th class=\"py-3\">名稱</th>\r\n            <th class=\"py-3\">折扣百分比</th>\r\n            <th class=\"py-3\">到期日</th>\r\n            <th class=\"py-3\">是否啟用</th>\r\n            <th class=\"py-3\">編輯</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr\r\n            v-for=\"(item, key) in coupons\"\r\n            :key=\"key\"\r\n            style=\"border-bottom: 1px solid #000\"\r\n          >\r\n            <td>{{ item.title }}</td>\r\n            <td>{{ item.percent }}%</td>\r\n            <td>{{ $filters.date(item.due_date) }}</td>\r\n            <td>\r\n              <span v-if=\"item.is_enabled === 1\" class=\"text-success\"\r\n                >啟用</span\r\n              >\r\n              <span v-else class=\"text-muted\">未起用</span>\r\n            </td>\r\n            <td>\r\n              <div class=\"btn-group\">\r\n                <button\r\n                  class=\"btn btn-outline-primary btn-sm\"\r\n                  @click=\"openCouponModal(false, item)\"\r\n                >\r\n                  編輯\r\n                </button>\r\n                <button\r\n                  class=\"btn btn-outline-danger btn-sm\"\r\n                  @click=\"openDelCouponModal(item)\"\r\n                >\r\n                  刪除\r\n                </button>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </section>\r\n    <couponModal\r\n      :coupon=\"tempCoupon\"\r\n      ref=\"couponModal\"\r\n      @update-coupon=\"updateCoupon\"\r\n    />\r\n    <DelModal :item=\"tempCoupon\" ref=\"delModal\" @del-item=\"delCoupon\" />\r\n    <Pagination :pages=\"pagination\" @emit-pages=\"getCoupons\"></Pagination>\r\n  </main>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n.coupons {\r\n  width: 100%;\r\n  overflow-x: auto;\r\n  .table {\r\n    min-width: 500px;\r\n  }\r\n\r\n  &::-webkit-scrollbar {\r\n    width: 10px;\r\n  }\r\n  &::-webkit-scrollbar:horizontal {\r\n    height: 10px;\r\n  }\r\n  &::-webkit-scrollbar-track {\r\n    background-color: transparentize(#ccc, 0.7);\r\n    box-shadow: inset 1px 1px 0 1px #ccc;\r\n  }\r\n  &::-webkit-scrollbar-thumb {\r\n    border-radius: 8px;\r\n    background: transparentize(rgb(223, 223, 223), 0.5);\r\n    box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.5);\r\n  }\r\n}\r\n</style>\r\n\r\n<script>\r\nimport CouponModal from \"@/components/CouponModal.vue\";\r\nimport DelModal from \"@/components/DelModal.vue\";\r\nimport Pagination from \"@/components/Pagination.vue\";\r\nimport { mapActions } from \"pinia\";\r\nimport statusStore from \"@/stores/statusStore\";\r\n\r\nexport default {\r\n  components: { CouponModal, DelModal, Pagination },\r\n  props: {\r\n    config: Object,\r\n  },\r\n  data() {\r\n    return {\r\n      coupons: {},\r\n      tempCoupon: {},\r\n      isLoading: false,\r\n      isNew: false,\r\n      pagination: {},\r\n      currentPage: 1,\r\n    };\r\n  },\r\n  methods: {\r\n    ...mapActions(statusStore, [\"pushMessage\"]),\r\n\r\n    openCouponModal(isNew, item) {\r\n      this.isNew = isNew;\r\n      if (this.isNew) {\r\n        this.tempCoupon = {\r\n          due_date: new Date().getTime() / 1000,\r\n        };\r\n      } else {\r\n        this.tempCoupon = { ...item };\r\n      }\r\n      this.$refs.couponModal.showModal();\r\n    },\r\n    openDelCouponModal(item) {\r\n      this.tempCoupon = { ...item };\r\n      const delComponent = this.$refs.delModal;\r\n      delComponent.showModal();\r\n    },\r\n    getCoupons(currentPage = 1) {\r\n      this.currentPage = currentPage;\r\n      this.isLoading = true;\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/coupons?page=${currentPage}`;\r\n      this.$http.get(url, this.tempProduct).then((res) => {\r\n        this.coupons = res.data.coupons;\r\n        this.pagination = res.data.pagination;\r\n        this.isLoading = false;\r\n        console.log(res);\r\n      });\r\n    },\r\n    updateCoupon(tempCoupon) {\r\n      let httpMethod, url;\r\n      if (this.isNew) {\r\n        url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/coupon`;\r\n        httpMethod = \"post\";\r\n      } else {\r\n        url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/coupon/${tempCoupon.id}`;\r\n        httpMethod = \"put\";\r\n      }\r\n      this.$http[httpMethod](url, { data: tempCoupon }).then((res) => {\r\n        console.log(res);\r\n        this.pushMessage(res.data.success, { title: \"編輯\" });\r\n        this.getCoupons();\r\n        this.$refs.couponModal.hideModal();\r\n      });\r\n    },\r\n    delCoupon() {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/coupon/${this.tempCoupon.id}`;\r\n      this.isLoading = true;\r\n      this.$http.delete(url).then((res) => {\r\n        console.log(res, this.tempCoupon);\r\n        this.pushMessage(res.data.success, { title: \"刪除\" });\r\n        const delComponent = this.$refs.delModal;\r\n        delComponent.hideModal();\r\n        this.getCoupons();\r\n      });\r\n    },\r\n  },\r\n  created() {\r\n    this.getCoupons();\r\n  },\r\n};\r\n</script>\r\n","<template>\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"couponModal\"\r\n    tabindex=\"-1\"\r\n    role=\"dialog\"\r\n    aria-labelledby=\"exampleModalLabel\"\r\n    aria-hidden=\"true\"\r\n    ref=\"modal\"\r\n  >\r\n    <div class=\"modal-dialog\" role=\"document\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">新增優惠券</h5>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn-close\"\r\n            data-bs-dismiss=\"modal\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"mb-3\">\r\n            <label for=\"title\">標題</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              id=\"title\"\r\n              v-model=\"tempCoupon.title\"\r\n              placeholder=\"請輸入標題\"\r\n            />\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"coupon_code\">優惠碼</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              id=\"coupon_code\"\r\n              v-model=\"tempCoupon.code\"\r\n              placeholder=\"請輸入優惠碼\"\r\n            />\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"due_date\">到期日</label>\r\n            <input\r\n              type=\"date\"\r\n              class=\"form-control\"\r\n              id=\"due_date\"\r\n              v-model=\"due_date\"\r\n            />\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"price\">折扣百分比</label>\r\n            <input\r\n              type=\"number\"\r\n              class=\"form-control\"\r\n              id=\"price\"\r\n              v-model.number=\"tempCoupon.percent\"\r\n              placeholder=\"請輸入折扣百分比\"\r\n            />\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <div class=\"form-check\">\r\n              <input\r\n                class=\"form-check-input\"\r\n                type=\"checkbox\"\r\n                :true-value=\"1\"\r\n                :false-value=\"0\"\r\n                v-model=\"tempCoupon.is_enabled\"\r\n                id=\"is_enabled\"\r\n              />\r\n              <label class=\"form-check-label\" for=\"is_enabled\">\r\n                是否啟用\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-yellow-deep text-white\"\r\n            data-bs-dismiss=\"modal\"\r\n          >\r\n            Close\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-yellow text-white\"\r\n            @click=\"$emit('update-coupon', tempCoupon)\"\r\n          >\r\n            更新優惠券\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport modalMixin from \"@/mixins/modalMixin\";\r\nexport default {\r\n  name: \"couponModal\",\r\n  props: {\r\n    coupon: {},\r\n  },\r\n  data() {\r\n    return {\r\n      tempCoupon: {},\r\n      due_date: \"\",\r\n    };\r\n  },\r\n  emits: [\"update-coupon\"],\r\n  watch: {\r\n    coupon() {\r\n      this.tempCoupon = this.coupon;\r\n      // 將時間格式改為 YYYY-MM-DD\r\n      console.log(this.tempCoupon.due_date);\r\n      const dateAndTime = new Date(this.tempCoupon.due_date * 1000)\r\n        .toISOString()\r\n        .split(\"T\");\r\n      [this.due_date] = dateAndTime;\r\n    },\r\n    due_date() {\r\n      this.tempCoupon.due_date = Math.floor(new Date(this.due_date) / 1000);\r\n    },\r\n  },\r\n  mixins: [modalMixin],\r\n};\r\n</script>\r\n","import { render } from \"./CouponModal.vue?vue&type=template&id=314c6c1a\"\nimport script from \"./CouponModal.vue?vue&type=script&lang=js\"\nexport * from \"./CouponModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Eason\\\\Documents\\\\GitHub\\\\vue-final\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Coupons.vue?vue&type=template&id=41f3dcf2\"\nimport script from \"./Coupons.vue?vue&type=script&lang=js\"\nexport * from \"./Coupons.vue?vue&type=script&lang=js\"\n\nimport \"./Coupons.vue?vue&type=style&index=0&id=41f3dcf2&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\Eason\\\\Documents\\\\GitHub\\\\vue-final\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_4","_hoisted_8","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","disabled","$props","has_pre","href","onClick","$options","current_page","_Fragment","total_pages","page","key","active","_hoisted_7","has_next","props","methods","updatePage","this","$emit","__exports__","render","_createVNode","_component_Loading","$data","_hoisted_5","_hoisted_6","item","style","title","percent","_ctx","date","due_date","is_enabled","_hoisted_9","_component_couponModal","coupon","ref","onUpdateCoupon","_component_DelModal","onDelItem","_component_Pagination","pages","onEmitPages","id","tabindex","role","type","for","placeholder","code","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","name","data","tempCoupon","emits","watch","console","log","dateAndTime","Date","toISOString","split","Math","floor","mixins","modalMixin","components","CouponModal","DelModal","Pagination","config","Object","coupons","isLoading","isNew","pagination","currentPage","mapActions","statusStore","openCouponModal","getTime","$refs","couponModal","showModal","openDelCouponModal","delComponent","delModal","getCoupons","url","$http","get","tempProduct","then","res","updateCoupon","httpMethod","pushMessage","success","hideModal","delCoupon","delete","created"],"sourceRoot":""}