"use strict";(self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[]).push([[185],{978:function(t,e,o){o(7658);var i=o(5820);e["Z"]={methods:{toggleFavorite(t){this.favoriteItems.includes(t)?this.favoriteItems.splice(this.favoriteItems.indexOf(t),1):this.favoriteItems.push(t),localStorage.setItem("favoriteItems",JSON.stringify(this.favoriteItems)),i.Z.emit("updateFavorite")},getLocalFavorite(){return JSON.parse(localStorage.getItem("favoriteItems"))}}}},4677:function(t,e,o){var i=o(4311),s=o(1020),a=o(6294);const r=(0,a.Z)();e["Z"]=(0,s.Q_)("cartStore",{state:()=>({cart:{}}),actions:{addToCart(t){console.log(t),r.cartLoading=t;const e="https://vue3-course-api.hexschool.io/api/qing-api/cart",o={product_id:t,qty:1};i.Z.post(e,{data:o}).then((t=>{r.cartLoading="",r.pushMessage(t,{title:"加入購物車"}),this.getCart()}))},getCart(){const t="https://vue3-course-api.hexschool.io/api/qing-api/cart";r.isLoading=!0,i.Z.get(t).then((t=>{this.cart=t.data.data,r.isLoading=!1}))},updateCart(t){const e=`https://vue3-course-api.hexschool.io/api/qing-api/cart/${t.id}`;r.cartLoading=t.id;const o={product_id:t.product_id,qty:t.qty};i.Z.put(e,{data:o}).then((t=>{r.cartLoading="",this.getCart()}))},removeCartItem(t){const e=`https://vue3-course-api.hexschool.io/api/qing-api/cart/${t}`;r.isLoading=!0,i.Z["delete"](e).then((t=>{r.isLoading=!1,console.log(t),r.pushMessage(t,{title:"刪除"}),this.getCart()}))}}})},4238:function(t,e,o){var i=o(4311),s=o(1020),a=o(6294);const r=(0,a.Z)();e["Z"]=(0,s.Q_)("productStore",{state:()=>({products:[],pagination:{}}),getters:{sortProducts:t=>t.products.sort(((t,e)=>t.price-e.price))},actions:{getProducts(t=1){const e=`https://vue3-course-api.hexschool.io/api/qing-api/products/?page=${t}`;r.isLoading=!0,i.Z.get(e).then((t=>{this.products=t.data.products,this.pagination=t.data.pagination,console.log("products:",t),r.isLoading=!1}))}}})},6294:function(t,e,o){o(7658);var i=o(1020);e["Z"]=(0,i.Q_)("statusStore",{state:()=>({isLoading:!1,cartLoading:"",messages:[]}),actions:{pushMessage(t,e){const{title:o="更新",content:i,style:s="success"}=e;t.data.success?this.messages.push({style:s,title:`${o}成功`,content:i}):this.messages.push({style:"danger",title:`${o}失敗`,content:message.join("、")})}}})},3185:function(t,e,o){o.r(e),o.d(e,{default:function(){return P}});var i=o(3396),s=o(7139);const a={class:"container"},r={class:"card-favorite"},c={class:"pic"},n=["src"],d={class:"content"},u=(0,i._)("button",{class:"btn btn-outline-danger"},"加到購物車",-1),p=["onClick"],g=(0,i._)("i",{class:"bi bi-x-lg"},null,-1),h=[g];function l(t,e,o,g,l,v){return(0,i.wg)(),(0,i.iD)("main",a,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.favoriteProduct,((t,e)=>((0,i.wg)(),(0,i.iD)("section",{key:e},[(0,i._)("div",r,[(0,i._)("div",c,[(0,i._)("img",{src:t.product.imageUrl,alt:"產品圖片"},null,8,n)]),(0,i._)("article",d,[(0,i._)("h3",null,(0,s.zw)(t.product.title),1),(0,i._)("p",null,(0,s.zw)(t.product.origin_price),1),u]),(0,i._)("div",{class:"cross",onClick:o=>v.removeFavoriteProduct(t.product.id,e)},h,8,p)])])))),128))])}o(7658);var v=o(1020),f=o(4238),m=o(4677),Z=o(6294),_=o(978),L={data(){return{favoriteItems:this.getLocalFavorite()||[],favoriteProduct:[]}},mixins:[_.Z],computed:{...(0,v.rn)(f.Z,["products","pagination"]),...(0,v.rn)(m.Z,["cart"]),...(0,v.rn)(Z.Z,["isLoading","cartLoading"])},methods:{...(0,v.nv)(f.Z,["getProducts"]),...(0,v.nv)(m.Z,["addToCart","getCart"]),getFavoriteProduct(){this.favoriteItems&&this.favoriteItems.forEach((t=>{const e=`https://vue3-course-api.hexschool.io/api/qing-api/product/${t}`;this.$http.get(e).then((t=>{this.favoriteProduct.push(t.data)}))}))},removeFavoriteProduct(t,e){console.log(this.favoriteItems.indexOf(t)),this.toggleFavorite(t),this.favoriteProduct.splice(e,1)}},created(){this.getCart(),this.getFavoriteProduct()}},C=o(89);const I=(0,C.Z)(L,[["render",l]]);var P=I}}]);
//# sourceMappingURL=185.f7762c1d.js.map