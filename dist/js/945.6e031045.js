"use strict";(self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[]).push([[945],{978:function(t,e,i){i(7658);var o=i(5820);e["Z"]={methods:{toggleFavorite(t){this.favoriteItems.includes(t)?this.favoriteItems.splice(this.favoriteItems.indexOf(t),1):this.favoriteItems.push(t),localStorage.setItem("favoriteItems",JSON.stringify(this.favoriteItems)),o.Z.emit("updateFavorite")},getLocalFavorite(){this.favoriteItems=JSON.parse(localStorage.getItem("favoriteItems"))}}}},4677:function(t,e,i){var o=i(4311),s=i(1020),a=i(6294);const r=(0,a.Z)();e["Z"]=(0,s.Q_)("cartStore",{state:()=>({cart:{}}),actions:{addToCart(t){console.log(t),r.cartLoading=t;const e="https://vue3-course-api.hexschool.io/api/qing-api/cart",i={product_id:t,qty:1};o.Z.post(e,{data:i}).then((t=>{r.cartLoading="",r.pushMessage(t,{title:"加入購物車"}),this.getCart()}))},getCart(){const t="https://vue3-course-api.hexschool.io/api/qing-api/cart";r.isLoading=!0,o.Z.get(t).then((t=>{this.cart=t.data.data,r.isLoading=!1}))},updateCart(t){const e=`https://vue3-course-api.hexschool.io/api/qing-api/cart/${t.id}`;r.cartLoading=t.id;const i={product_id:t.product_id,qty:t.qty};o.Z.put(e,{data:i}).then((t=>{r.cartLoading="",this.getCart()}))},removeCartItem(t){const e=`https://vue3-course-api.hexschool.io/api/qing-api/cart/${t}`;r.isLoading=!0,o.Z["delete"](e).then((t=>{r.isLoading=!1,console.log(t),r.pushMessage(t,{title:"刪除"}),this.getCart()}))}}})},4238:function(t,e,i){var o=i(4311),s=i(1020),a=i(6294);const r=(0,a.Z)();e["Z"]=(0,s.Q_)("productStore",{state:()=>({products:[],pagination:{}}),getters:{sortProducts:t=>t.products.sort(((t,e)=>t.price-e.price))},actions:{getProducts(t=1){const e=`https://vue3-course-api.hexschool.io/api/qing-api/products/?page=${t}`;r.isLoading=!0,o.Z.get(e).then((t=>{this.products=t.data.products,this.pagination=t.data.pagination,console.log("products:",t),r.isLoading=!1}))}}})},6294:function(t,e,i){i(7658);var o=i(1020);e["Z"]=(0,o.Q_)("statusStore",{state:()=>({isLoading:!1,cartLoading:"",messages:[]}),actions:{pushMessage(t,e){const{title:i="更新",content:o,style:s="success"}=e;t.data.success?this.messages.push({style:s,title:`${i}成功`,content:o}):this.messages.push({style:"danger",title:`${i}失敗`,content:message.join("、")})}}})},8945:function(t,e,i){i.r(e),i.d(e,{default:function(){return P}});var o=i(3396),s=i(7139);const a={class:"container"},r={class:"card-favorite"},c={class:"pic"},n=["src"],d={class:"content"},u=(0,o._)("button",{class:"btn btn-outline-danger"},"加到購物車",-1),p=["onClick"],g=(0,o._)("i",{class:"bi bi-x-lg"},null,-1),h=[g];function l(t,e,i,g,l,v){return(0,o.wg)(),(0,o.iD)("main",a,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.favoriteProduct,((t,e)=>((0,o.wg)(),(0,o.iD)("section",{key:e},[(0,o._)("div",r,[(0,o._)("div",c,[(0,o._)("img",{src:t.product.imageUrl,alt:"產品圖片"},null,8,n)]),(0,o._)("article",d,[(0,o._)("h3",null,(0,s.zw)(t.product.title),1),(0,o._)("p",null,(0,s.zw)(t.product.origin_price),1),u]),(0,o._)("div",{class:"cross",onClick:i=>v.removeFavoriteProduct(t.product.id,e)},h,8,p)])])))),128))])}i(7658);var v=i(1020),f=i(4238),m=i(4677),Z=i(6294),_=i(978),L={data(){return{favoriteItems:[],favoriteProduct:[]}},mixins:[_.Z],computed:{...(0,v.rn)(f.Z,["products","pagination"]),...(0,v.rn)(m.Z,["cart"]),...(0,v.rn)(Z.Z,["isLoading","cartLoading"])},methods:{...(0,v.nv)(f.Z,["getProducts"]),...(0,v.nv)(m.Z,["addToCart","getCart"]),getFavoriteProduct(){this.favoriteItems&&this.favoriteItems.forEach((t=>{const e=`https://vue3-course-api.hexschool.io/api/qing-api/product/${t}`;this.$http.get(e).then((t=>{this.favoriteProduct.push(t.data)}))}))},removeFavoriteProduct(t,e){console.log(this.favoriteItems.indexOf(t)),this.toggleFavorite(t),this.favoriteProduct.splice(e,1)}},created(){this.getCart(),this.getLocalFavorite(),this.getFavoriteProduct()}},I=i(89);const C=(0,I.Z)(L,[["render",l]]);var P=C}}]);
//# sourceMappingURL=945.6e031045.js.map