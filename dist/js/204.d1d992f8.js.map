{"version":3,"file":"js/204.d1d992f8.js","mappings":"0IAGA,QACEA,QAAS,CACPC,eAAeC,GACTC,KAAKC,cAAcC,SAASH,GAC9BC,KAAKC,cAAcE,OAAOH,KAAKC,cAAcG,QAAQL,GAAS,GAE9DC,KAAKC,cAAcI,KAAKN,GAE1BO,aAAaC,QAAQ,gBAAiBC,KAAKC,UAAUT,KAAKC,gBAC1DS,EAAAA,EAAAA,KAAa,iBACf,EACAC,mBACE,OAAOH,KAAKI,MAAMN,aAAaO,QAAQ,iBACzC,G,yDCZJ,MAAMC,GAASC,EAAAA,EAAAA,KAEf,QAAeC,EAAAA,EAAAA,IAAY,YAAa,CACtCC,MAAO,KACE,CACLC,KAAM,CAAC,IAIXC,QAAS,CACPC,UAAUC,GACRC,QAAQC,IAAIF,GACZP,EAAOU,YAAcH,EACrB,MAAMI,EAAO,yDACPP,EAAO,CACXQ,WAAYL,EACZM,IAAK,GAEPC,EAAAA,EAAAA,KAAWH,EAAK,CAAEI,KAAMX,IAAQY,MAAMC,IACpCjB,EAAOU,YAAc,GAErBV,EAAOkB,YAAYD,EAAK,CAAEE,MAAO,UAEjCjC,KAAKkC,SAAS,GAElB,EACAA,UACE,MAAMT,EAAO,yDACbX,EAAOqB,WAAY,EACnBP,EAAAA,EAAAA,IAAUH,GAAKK,MAAMC,IAEnB/B,KAAKkB,KAAOa,EAAIF,KAAKA,KACrBf,EAAOqB,WAAY,CAAK,GAE5B,EACAC,WAAWC,GAET,MAAMZ,EAAO,0DAAkEY,EAAKhB,KAEpFP,EAAOU,YAAca,EAAKhB,GAC1B,MAAMH,EAAO,CACXQ,WAAYW,EAAKX,WACjBC,IAAKU,EAAKV,KAEZC,EAAAA,EAAAA,IAAUH,EAAK,CAAEI,KAAMX,IAAQY,MAAMC,IAEnCjB,EAAOU,YAAc,GACrBxB,KAAKkC,SAAS,GAElB,EACAI,eAAejB,GACb,MAAMI,EAAO,0DAAkEJ,IAC/EP,EAAOqB,WAAY,EACnBP,EAAAA,EAAAA,UAAaH,GAAKK,MAAMC,IACtBjB,EAAOqB,WAAY,EACnBb,QAAQC,IAAIQ,GAEZjB,EAAOkB,YAAYD,EAAK,CAAEE,MAAO,OACjCjC,KAAKkC,SAAS,GAElB,I,yDC5DJ,MAAMpB,GAASC,EAAAA,EAAAA,KAEf,QAAeC,EAAAA,EAAAA,IAAY,eAAgB,CACzCC,MAAO,KACE,CACLsB,SAAU,GACVC,WAAY,CAAC,IAGjBC,QAAS,CACPC,aAAezB,GAAUA,EAAMsB,SAASI,MAAK,CAACC,EAAGC,IAAMD,EAAEE,MAAQD,EAAEC,SAErE3B,QAAS,CACP4B,YAAYC,EAAO,GACjB,MAAMvB,EAAO,oEAA4EuB,IACzFlC,EAAOqB,WAAY,EACnBP,EAAAA,EAAAA,IAAUH,GAAKK,MAAMC,IACnB/B,KAAKuC,SAAWR,EAAIF,KAAKU,SACzBvC,KAAKwC,WAAaT,EAAIF,KAAKW,WAC3BlB,QAAQC,IAAI,YAAaQ,GACzBjB,EAAOqB,WAAY,CAAK,GAE5B,I,6CCxBJ,QAAenB,EAAAA,EAAAA,IAAY,cAAe,CACxCC,MAAO,KACE,CACLkB,WAAW,EACXX,YAAa,GACbyB,SAAU,KAGd9B,QAAS,CACPa,YAAYD,EAAKF,GACf,MAAM,MAAEI,EAAQ,KAAI,QAAEiB,EAAO,MAAEC,EAAQ,WAActB,EACjDE,EAAIF,KAAKuB,QACXpD,KAAKiD,SAAS5C,KAAK,CAAE8C,QAAOlB,MAAQ,GAAEA,MAAWiB,YAEjDlD,KAAKiD,SAAS5C,KAAK,CACjB8C,MAAO,SACPlB,MAAQ,GAAEA,MACViB,QAASG,QAAQC,KAAK,MAG5B,I,qGCrBIC,MAAM,a,GAEHA,MAAM,iB,GACJA,MAAM,O,aAGFA,MAAM,W,+BAWbC,EAAAA,EAAAA,GAA0B,KAAvBD,MAAM,cAAY,S,GAArBE,G,0CAjBRC,EAAAA,EAAAA,IAqBO,OArBPC,EAqBO,gBApBLD,EAAAA,EAAAA,IAmBUE,EAAAA,GAAAA,MAAAA,EAAAA,EAAAA,IAnBqBC,EAAAA,iBAAe,CAA7BxB,EAAMyB,M,WAAvBJ,EAAAA,EAAAA,IAmBU,WAnBuCI,IAAKA,GAAG,EACvDN,EAAAA,EAAAA,GAiBM,MAjBNO,EAiBM,EAhBJP,EAAAA,EAAAA,GAEM,MAFNQ,EAEM,EADJR,EAAAA,EAAAA,GAA+C,OAAzCS,IAAK5B,EAAK6B,QAAQC,SAAUC,IAAI,Q,aAExCZ,EAAAA,EAAAA,GASU,UATVa,EASU,EARRb,EAAAA,EAAAA,GAAiC,mBAA1BnB,EAAK6B,QAAQjC,OAAK,IACzBuB,EAAAA,EAAAA,GAAuC,kBAAjCnB,EAAK6B,QAAQI,cAAe,IAAC,IACnCd,EAAAA,EAAAA,GAKS,UAJPD,MAAM,yBACLgB,QAAK,GAAEC,EAAAA,UAAUnC,EAAK6B,QAAQ7C,KAChC,UAED,QAEFmC,EAAAA,EAAAA,GAEM,OAFDD,MAAM,QAASgB,QAAK,GAAEE,EAAAA,sBAAsBpC,EAAK6B,QAAQ7C,GAAIyC,I,mFAyE1E,GACEjC,OACE,MAAO,CACL5B,cAAeD,KAAKW,oBAAsB,GAC1C+D,gBAAiB,GAErB,EACAC,OAAQ,CAACC,EAAAA,GACTC,SAAU,KACLC,EAAAA,EAAAA,IAASC,EAAAA,EAAc,CAAC,WAAY,mBACpCD,EAAAA,EAAAA,IAASE,EAAAA,EAAW,CAAC,aACrBF,EAAAA,EAAAA,IAAS/D,EAAAA,EAAa,CAAC,YAAa,iBAEzClB,QAAS,KACJoF,EAAAA,EAAAA,IAAWF,EAAAA,EAAc,CAAC,oBAC1BE,EAAAA,EAAAA,IAAWD,EAAAA,EAAW,CAAC,YAAa,YAEvCE,qBACElF,KAAKC,cAAgBD,KAAKW,mBAEtBX,KAAKC,eACPD,KAAKC,cAAckF,SAAS9C,IAC1B,MAAMZ,EAAO,6DAAqEY,IAElFrC,KAAKoF,MAAMC,IAAI5D,GAAKK,MAAMC,IACxB/B,KAAK0E,gBAAgBrE,KAAK0B,EAAIF,MAC9BP,QAAQC,IAAIQ,EAAIF,KAAK,GACrB,GAGR,EACAyD,sBAAsBjE,EAAIyC,GACxBxC,QAAQC,IAAIvB,KAAKC,cAAcG,QAAQiB,IACvCrB,KAAKF,eAAeuB,GACpBrB,KAAK0E,gBAAgBvE,OAAO2D,EAAK,EACnC,GAEFyB,UAEEvF,KAAKkC,UACLlC,KAAKkF,oBACP,G,QC5HF,MAAMM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://vue-project/./src/mixins/localFavorite.js","webpack://vue-project/./src/stores/cartStore.js","webpack://vue-project/./src/stores/productStore.js","webpack://vue-project/./src/stores/statusStore.js","webpack://vue-project/./src/views/front/UserFavorite.vue","webpack://vue-project/./src/views/front/UserFavorite.vue?78bb"],"sourcesContent":["import emitter from \"@/methods/emitter\";\r\n\r\n\r\nexport default {\r\n  methods: {\r\n    toggleFavorite(itemId) {\r\n      if (this.favoriteItems.includes(itemId)) {\r\n        this.favoriteItems.splice(this.favoriteItems.indexOf(itemId), 1);\r\n      } else {\r\n        this.favoriteItems.push(itemId);\r\n      }\r\n      localStorage.setItem('favoriteItems', JSON.stringify(this.favoriteItems));\r\n      emitter.emit('updateFavorite');\r\n    },\r\n    getLocalFavorite() {\r\n      return JSON.parse(localStorage.getItem(\"favoriteItems\"));\r\n    }\r\n  },\r\n};\r\n","import axios from \"axios\";\r\nimport { defineStore } from \"pinia\";\r\nimport statusStore from \"./statusStore\";\r\n\r\nconst status = statusStore();\r\n\r\nexport default defineStore(\"cartStore\", {\r\n  state: () => {\r\n    return {\r\n      cart: {},\r\n    };\r\n  },\r\n\r\n  actions: {\r\n    addToCart(id) {\r\n      console.log(id);\r\n      status.cartLoading = id;\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`;\r\n      const cart = {\r\n        product_id: id,\r\n        qty: 1,\r\n      };\r\n      axios.post(url, { data: cart }).then((res) => {\r\n        status.cartLoading = \"\";\r\n        // this.$httpMessageState(res, \"加入購物車\");\r\n        status.pushMessage(res, { title: '加入購物車' })\r\n        // console.log(res);\r\n        this.getCart();\r\n      });\r\n    },\r\n    getCart() {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`;\r\n      status.isLoading = true;\r\n      axios.get(url).then((res) => {\r\n        // console.log(res.data.data);\r\n        this.cart = res.data.data;\r\n        status.isLoading = false;\r\n      });\r\n    },\r\n    updateCart(item) {\r\n      // console.log(item);\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\r\n      // status.isLoading = true;\r\n      status.cartLoading = item.id;\r\n      const cart = {\r\n        product_id: item.product_id,\r\n        qty: item.qty,\r\n      };\r\n      axios.put(url, { data: cart }).then((res) => {\r\n        // console.log(res);\r\n        status.cartLoading = \"\";\r\n        this.getCart();\r\n      });\r\n    },\r\n    removeCartItem(id) {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`;\r\n      status.isLoading = true;\r\n      axios.delete(url).then((res) => {\r\n        status.isLoading = false;\r\n        console.log(res);\r\n        // this.$httpMessageState(res, \"刪除\");\r\n        status.pushMessage(res, { title: '刪除' })\r\n        this.getCart();\r\n      });\r\n    },\r\n  },\r\n});\r\n","import axios from \"axios\";\r\nimport { defineStore } from \"pinia\";\r\nimport statusStore from \"./statusStore\";\r\n\r\nconst status = statusStore();\r\n\r\nexport default defineStore(\"productStore\", {\r\n  state: () => {\r\n    return {\r\n      products: [],\r\n      pagination: {},\r\n    };\r\n  },\r\n  getters: {\r\n    sortProducts: (state) => state.products.sort((a, b) => a.price - b.price),\r\n  },\r\n  actions: {\r\n    getProducts(page = 1) {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/?page=${page}`;\r\n      status.isLoading = true;\r\n      axios.get(url).then((res) => {\r\n        this.products = res.data.products;\r\n        this.pagination = res.data.pagination;\r\n        console.log(\"products:\", res);\r\n        status.isLoading = false;\r\n      });\r\n    },\r\n  },\r\n});\r\n","import { defineStore } from \"pinia\";\r\n\r\nexport default defineStore(\"statusStore\", {\r\n  state: () => {\r\n    return {\r\n      isLoading: false,\r\n      cartLoading: \"\",\r\n      messages: [],\r\n    };\r\n  },\r\n  actions: {\r\n    pushMessage(res, data) {\r\n      const { title = \"更新\", content, style = \"success\" } = data;\r\n      if (res.data.success) {\r\n        this.messages.push({ style, title: `${title}成功`, content });\r\n      } else {\r\n        this.messages.push({\r\n          style: \"danger\",\r\n          title: `${title}失敗`,\r\n          content: message.join(\"、\"),\r\n        });\r\n      }\r\n    },\r\n  },\r\n});\r\n","<template>\r\n  <main class=\"container\">\r\n    <section v-for=\"(item, key) in favoriteProduct\" :key=\"key\">\r\n      <div class=\"card-favorite\">\r\n        <div class=\"pic\">\r\n          <img :src=\"item.product.imageUrl\" alt=\"產品圖片\" />\r\n        </div>\r\n        <article class=\"content\">\r\n          <h3>{{ item.product.title }}</h3>\r\n          <p>{{ item.product.origin_price }}元</p>\r\n          <button\r\n            class=\"btn btn-outline-danger\"\r\n            @click=\"addToCart(item.product.id)\"\r\n          >\r\n            加到購物車\r\n          </button>\r\n        </article>\r\n        <div class=\"cross\" @click=\"removeFavoriteProduct(item.product.id, key)\">\r\n          <i class=\"bi bi-x-lg\"></i>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </main>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n.card-favorite {\r\n  border: none;\r\n  margin-bottom: 20px;\r\n  position: relative;\r\n  .pic {\r\n    height: 200px;\r\n    border-radius: 24px;\r\n    overflow: hidden;\r\n    img {\r\n      width: 100%;\r\n      height: 100%;\r\n      vertical-align: bottom;\r\n      object-fit: cover;\r\n    }\r\n  }\r\n  .content {\r\n    h3 {\r\n      margin-bottom: 12px;\r\n      font-size: 20px;\r\n    }\r\n    p {\r\n      margin-bottom: 8px;\r\n    }\r\n  }\r\n  .cross {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 1%;\r\n    font-size: 40px;\r\n  }\r\n  &::after {\r\n    content: \"\";\r\n    margin-top: 12px;\r\n    border-bottom: 1px solid #000;\r\n  }\r\n}\r\n@media (min-width: 576px) {\r\n  .card-favorite {\r\n    display: flex;\r\n    padding: 0 10%;\r\n    .pic {\r\n      width: 40%;\r\n      // height: 100%;\r\n    }\r\n    .content {\r\n      padding: 12px 40px;\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: center;\r\n    }\r\n    .cross {\r\n      right: 10%;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<script>\r\nimport { mapState, mapActions } from \"pinia\";\r\nimport productStore from \"@/stores/productStore\";\r\nimport cartStore from \"@/stores/cartStore\";\r\nimport statusStore from \"@/stores/statusStore\";\r\nimport localFavorite from \"@/mixins/localFavorite\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      favoriteItems: this.getLocalFavorite() || [],\r\n      favoriteProduct: [],\r\n    };\r\n  },\r\n  mixins: [localFavorite],\r\n  computed: {\r\n    ...mapState(productStore, [\"products\", \"pagination\"]),\r\n    ...mapState(cartStore, [\"cart\"]),\r\n    ...mapState(statusStore, [\"isLoading\", \"cartLoading\"]),\r\n  },\r\n  methods: {\r\n    ...mapActions(productStore, [\"getProducts\"]),\r\n    ...mapActions(cartStore, [\"addToCart\", \"getCart\"]),\r\n\r\n    getFavoriteProduct() {\r\n      this.favoriteItems = this.getLocalFavorite();\r\n      // console.log(this.favoriteItems);\r\n      if (this.favoriteItems) {\r\n        this.favoriteItems.forEach((item) => {\r\n          const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/product/${item}`;\r\n          // console.log(url);\r\n          this.$http.get(url).then((res) => {\r\n            this.favoriteProduct.push(res.data);\r\n            console.log(res.data);\r\n          });\r\n        });\r\n      }\r\n    },\r\n    removeFavoriteProduct(id, key) {\r\n      console.log(this.favoriteItems.indexOf(id));\r\n      this.toggleFavorite(id);\r\n      this.favoriteProduct.splice(key, 1);\r\n    },\r\n  },\r\n  created() {\r\n    // this.getProducts();\r\n    this.getCart();\r\n    this.getFavoriteProduct();\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./UserFavorite.vue?vue&type=template&id=911c5668\"\nimport script from \"./UserFavorite.vue?vue&type=script&lang=js\"\nexport * from \"./UserFavorite.vue?vue&type=script&lang=js\"\n\nimport \"./UserFavorite.vue?vue&type=style&index=0&id=911c5668&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\Eason\\\\Documents\\\\GitHub\\\\vue-final\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["methods","toggleFavorite","itemId","this","favoriteItems","includes","splice","indexOf","push","localStorage","setItem","JSON","stringify","emitter","getLocalFavorite","parse","getItem","status","statusStore","defineStore","state","cart","actions","addToCart","id","console","log","cartLoading","url","product_id","qty","axios","data","then","res","pushMessage","title","getCart","isLoading","updateCart","item","removeCartItem","products","pagination","getters","sortProducts","sort","a","b","price","getProducts","page","messages","content","style","success","message","join","class","_createElementVNode","_hoisted_8","_createElementBlock","_hoisted_1","_Fragment","$data","key","_hoisted_2","_hoisted_3","src","product","imageUrl","alt","_hoisted_5","origin_price","onClick","_ctx","$options","favoriteProduct","mixins","localFavorite","computed","mapState","productStore","cartStore","mapActions","getFavoriteProduct","forEach","$http","get","removeFavoriteProduct","created","__exports__","render"],"sourceRoot":""}