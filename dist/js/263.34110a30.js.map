{"version":3,"file":"js/263.34110a30.js","mappings":"uJAIA,MAAMA,GAASC,EAAAA,EAAAA,KAEf,QAAeC,EAAAA,EAAAA,IAAY,YAAa,CACtCC,MAAO,KACE,CACLC,KAAM,CAAC,IAIXC,QAAS,CACPC,UAAUC,GACRC,QAAQC,IAAIF,GACZP,EAAOU,YAAcH,EACrB,MAAMI,EAAO,yDACPP,EAAO,CACXQ,WAAYL,EACZM,IAAK,GAEPC,EAAAA,EAAAA,KAAWH,EAAK,CAAEI,KAAMX,IAAQY,MAAMC,IACpCjB,EAAOU,YAAc,GAErBV,EAAOkB,YAAYD,EAAK,CAAEE,MAAO,UAEjCC,KAAKC,SAAS,GAElB,EACAA,UACE,MAAMV,EAAO,yDACbX,EAAOsB,WAAY,EACnBR,EAAAA,EAAAA,IAAUH,GAAKK,MAAMC,IAEnBG,KAAKhB,KAAOa,EAAIF,KAAKA,KACrBf,EAAOsB,WAAY,CAAK,GAE5B,EACAC,WAAWC,GAET,MAAMb,EAAO,0DAAkEa,EAAKjB,KAEpFP,EAAOU,YAAcc,EAAKjB,GAC1B,MAAMH,EAAO,CACXQ,WAAYY,EAAKZ,WACjBC,IAAKW,EAAKX,KAEZC,EAAAA,EAAAA,IAAUH,EAAK,CAAEI,KAAMX,IAAQY,MAAMC,IAEnCjB,EAAOU,YAAc,GACrBU,KAAKC,SAAS,GAElB,EACAI,eAAelB,GACb,MAAMI,EAAO,0DAAkEJ,IAC/EP,EAAOsB,WAAY,EACnBR,EAAAA,EAAAA,UAAaH,GAAKK,MAAMC,IACtBjB,EAAOsB,WAAY,EACnBd,QAAQC,IAAIQ,GAEZjB,EAAOkB,YAAYD,EAAK,CAAEE,MAAO,OACjCC,KAAKC,SAAS,GAElB,I,yDC5DJ,MAAMrB,GAASC,EAAAA,EAAAA,KAEf,QAAeC,EAAAA,EAAAA,IAAY,eAAgB,CACzCC,MAAO,KACE,CACLuB,SAAU,GACVC,WAAY,CAAC,IAGjBC,QAAS,CACPC,aAAe1B,GAAUA,EAAMuB,SAASI,MAAK,CAACC,EAAGC,IAAMD,EAAEE,MAAQD,EAAEC,SAErE5B,QAAS,CACP6B,YAAYC,EAAO,GACjB,MAAMxB,EAAO,oEAA4EwB,IACzFnC,EAAOsB,WAAY,EACnBR,EAAAA,EAAAA,IAAUH,GAAKK,MAAMC,IACnBG,KAAKM,SAAWT,EAAIF,KAAKW,SACzBN,KAAKO,WAAaV,EAAIF,KAAKY,WAC3BnB,QAAQC,IAAI,YAAaQ,GACzBjB,EAAOsB,WAAY,CAAK,GAE5B,I,6CCxBJ,QAAepB,EAAAA,EAAAA,IAAY,cAAe,CACxCC,MAAO,KACE,CACLmB,WAAW,EACXZ,YAAa,GACb0B,SAAU,KAGd/B,QAAS,CACPa,YAAYD,EAAKF,GACf,MAAM,MAAEI,EAAQ,KAAI,QAAEkB,EAAO,MAAEC,EAAQ,WAAcvB,EACjDE,EAAIF,KAAKwB,QACXnB,KAAKgB,SAASI,KAAK,CAAEF,QAAOnB,MAAQ,GAAEA,MAAWkB,YAEjDjB,KAAKgB,SAASI,KAAK,CACjBF,MAAO,SACPnB,MAAQ,GAAEA,MACVkB,QAASI,QAAQC,KAAK,MAG5B,I,2FCrBGC,MAAM,Q,0CAAXC,EAAAA,EAAAA,IAAwB,MAAxBC,E,mCAQF,GACEC,KAAM,WACNC,WAAY,CAAC,EACbC,SAAU,KACLC,EAAAA,EAAAA,IAASC,EAAAA,EAAW,CAAC,UAE1BC,QAAS,KACJC,EAAAA,EAAAA,IAAWF,EAAAA,EAAW,CAAC,YAAa,aAEzCG,UACE7C,QAAQC,IAAI6C,uCAAyBA,YACrClC,KAAKC,SACP,G,QChBF,MAAMkC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://vue-project/./src/stores/cartStore.js","webpack://vue-project/./src/stores/productStore.js","webpack://vue-project/./src/stores/statusStore.js","webpack://vue-project/./src/views/front/Home.vue","webpack://vue-project/./src/views/front/Home.vue?ec91"],"sourcesContent":["import axios from \"axios\";\r\nimport { defineStore } from \"pinia\";\r\nimport statusStore from \"./statusStore\";\r\n\r\nconst status = statusStore();\r\n\r\nexport default defineStore(\"cartStore\", {\r\n  state: () => {\r\n    return {\r\n      cart: {},\r\n    };\r\n  },\r\n\r\n  actions: {\r\n    addToCart(id) {\r\n      console.log(id);\r\n      status.cartLoading = id;\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`;\r\n      const cart = {\r\n        product_id: id,\r\n        qty: 1,\r\n      };\r\n      axios.post(url, { data: cart }).then((res) => {\r\n        status.cartLoading = \"\";\r\n        // this.$httpMessageState(res, \"加入購物車\");\r\n        status.pushMessage(res, { title: '加入購物車' })\r\n        // console.log(res);\r\n        this.getCart();\r\n      });\r\n    },\r\n    getCart() {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`;\r\n      status.isLoading = true;\r\n      axios.get(url).then((res) => {\r\n        // console.log(res.data.data);\r\n        this.cart = res.data.data;\r\n        status.isLoading = false;\r\n      });\r\n    },\r\n    updateCart(item) {\r\n      // console.log(item);\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\r\n      // status.isLoading = true;\r\n      status.cartLoading = item.id;\r\n      const cart = {\r\n        product_id: item.product_id,\r\n        qty: item.qty,\r\n      };\r\n      axios.put(url, { data: cart }).then((res) => {\r\n        // console.log(res);\r\n        status.cartLoading = \"\";\r\n        this.getCart();\r\n      });\r\n    },\r\n    removeCartItem(id) {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`;\r\n      status.isLoading = true;\r\n      axios.delete(url).then((res) => {\r\n        status.isLoading = false;\r\n        console.log(res);\r\n        // this.$httpMessageState(res, \"刪除\");\r\n        status.pushMessage(res, { title: '刪除' })\r\n        this.getCart();\r\n      });\r\n    },\r\n  },\r\n});\r\n","import axios from \"axios\";\r\nimport { defineStore } from \"pinia\";\r\nimport statusStore from \"./statusStore\";\r\n\r\nconst status = statusStore();\r\n\r\nexport default defineStore(\"productStore\", {\r\n  state: () => {\r\n    return {\r\n      products: [],\r\n      pagination: {},\r\n    };\r\n  },\r\n  getters: {\r\n    sortProducts: (state) => state.products.sort((a, b) => a.price - b.price),\r\n  },\r\n  actions: {\r\n    getProducts(page = 1) {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/?page=${page}`;\r\n      status.isLoading = true;\r\n      axios.get(url).then((res) => {\r\n        this.products = res.data.products;\r\n        this.pagination = res.data.pagination;\r\n        console.log(\"products:\", res);\r\n        status.isLoading = false;\r\n      });\r\n    },\r\n  },\r\n});\r\n","import { defineStore } from \"pinia\";\r\n\r\nexport default defineStore(\"statusStore\", {\r\n  state: () => {\r\n    return {\r\n      isLoading: false,\r\n      cartLoading: \"\",\r\n      messages: [],\r\n    };\r\n  },\r\n  actions: {\r\n    pushMessage(res, data) {\r\n      const { title = \"更新\", content, style = \"success\" } = data;\r\n      if (res.data.success) {\r\n        this.messages.push({ style, title: `${title}成功`, content });\r\n      } else {\r\n        this.messages.push({\r\n          style: \"danger\",\r\n          title: `${title}失敗`,\r\n          content: message.join(\"、\"),\r\n        });\r\n      }\r\n    },\r\n  },\r\n});\r\n","<template>\n  <div class=\"home\"></div>\n</template>\n\n<script>\nimport { mapState, mapActions } from \"pinia\";\nimport productStore from \"@/stores/productStore\";\nimport cartStore from \"@/stores/cartStore\";\n\nexport default {\n  name: \"HomeView\",\n  components: {},\n  computed: {\n    ...mapState(cartStore, [\"cart\"]),\n  },\n  methods: {\n    ...mapActions(cartStore, [\"addToCart\", \"getCart\"]),\n  },\n  created() {\n    console.log(process.env.VUE_APP_API, process.env.VUE_APP_PATH);\n    this.getCart();\n  },\n};\n</script>\n","import { render } from \"./Home.vue?vue&type=template&id=22dacd24\"\nimport script from \"./Home.vue?vue&type=script&lang=js\"\nexport * from \"./Home.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Eason\\\\Documents\\\\GitHub\\\\vue-final\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["status","statusStore","defineStore","state","cart","actions","addToCart","id","console","log","cartLoading","url","product_id","qty","axios","data","then","res","pushMessage","title","this","getCart","isLoading","updateCart","item","removeCartItem","products","pagination","getters","sortProducts","sort","a","b","price","getProducts","page","messages","content","style","success","push","message","join","class","_createElementBlock","_hoisted_1","name","components","computed","mapState","cartStore","methods","mapActions","created","process","__exports__","render"],"sourceRoot":""}